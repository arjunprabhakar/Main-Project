
{% extends 'Service/Service_Base.html' %}
{% load static %}
{% block content %}
		<div class="mobile-menu-overlay"></div>

		<div class="main-container">
			<div class="pd-ltr-20 xs-pd-20-10">
				<div class="min-height-200px">
					<div class="page-header">
						<div class="row">
							<div class="col-md-12 col-sm-12">
								<div class="title">
									<h4>Profile</h4>
								</div>
								<nav aria-label="breadcrumb" role="navigation">
									<ol class="breadcrumb">
										<li class="breadcrumb-item">
											<a href="index.html">Home</a>
										</li>
										<li class="breadcrumb-item active" aria-current="page">
											Profile
										</li>
									</ol>
								</nav>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 mb-30">
							<div class="pd-20 card-box height-100-p">
								<div class="profile-photo">
							
								<!-- User Image -->
								{% for i in user %}
									<img
										src="{{i.image.url}}"
										alt=""
										class="avatar-photo"
										style="width:150px;height:150px"
									/>
									{% endfor %}
									<div
										class="modal fade"
										id="modal"
										tabindex="-1"
										role="dialog"
										aria-labelledby="modalLabel"
										aria-hidden="true"
									>
										<div
											class="modal-dialog modal-dialog-centered"
											role="document"
										>
											<div class="modal-content">
											
												<div class="modal-footer">
													<input
														type="submit"
														value="Update"
														class="btn btn-primary"
													/>
													<button
														type="button"
														class="btn btn-default"
														data-dismiss="modal"
													>
														Close
													</button>
												</div>
											</div>
										</div>
									</div>
								</div>
								{% for user in user %}
								<h5 class="text-center h5 mb-0">{{user.fname}} {{user.lname}}</h5>
								<p class="text-center text-muted font-14" style="color:red;">
									{{user.category.name}} Technician 
								</p>
								<div class="profile-info">
									<h5 class="mb-20 h5 text-blue">Details</h5>
									<ul>
										<li>
											<span>Email Address:</span>
											{{email}}
										</li>
										<li>
											<span>Phone Number:</span>
											{{user.phone_no}}
										</li>
										<li>
											<span>District:</span>
											{{user.district}}
										</li>
										<li>
											<span>Address:</span>
											{{user.hname}}<br/>
											{{user.street}} <br/>
											{{user.city}},Pin:{{user.pin}}
										</li>
									</ul>
								</div>
								{% endfor %}
								<!-- <div class="profile-skills">
									<h5 class="mb-20 h5 text-blue">Key Skills</h5>
									<h6 class="mb-5 font-14">HTML</h6>
									<div class="progress mb-20" style="height: 6px">
										<div
											class="progress-bar"
											role="progressbar"
											style="width: 90%"
											aria-valuenow="0"
											aria-valuemin="0"
											aria-valuemax="100"
										></div>
									</div>
									<h6 class="mb-5 font-14">Css</h6>
									<div class="progress mb-20" style="height: 6px">
										<div
											class="progress-bar"
											role="progressbar"
											style="width: 70%"
											aria-valuenow="0"
											aria-valuemin="0"
											aria-valuemax="100"
										></div>
									</div>
									<h6 class="mb-5 font-14">jQuery</h6>
									<div class="progress mb-20" style="height: 6px">
										<div
											class="progress-bar"
											role="progressbar"
											style="width: 60%"
											aria-valuenow="0"
											aria-valuemin="0"
											aria-valuemax="100"
										></div>
									</div>
									<h6 class="mb-5 font-14">Bootstrap</h6>
									<div class="progress mb-20" style="height: 6px">
										<div
											class="progress-bar"
											role="progressbar"
											style="width: 80%"
											aria-valuenow="0"
											aria-valuemin="0"
											aria-valuemax="100"
										></div>
									</div>
								</div> -->
							</div>
						</div>
						<div class="col-xl-8 col-lg-8 col-md-8 col-sm-12 mb-30">
							<div class="card-box height-100-p overflow-hidden">
								<div class="profile-tab height-100-p">
									<div class="tab height-100-p">
										<ul class="nav nav-tabs customtab" role="tablist">
											<!-- <li class="nav-item">
												<a
													class="nav-link active"
													data-toggle="tab"
													href="#timeline"
													role="tab"
													>Servive Requests</a
												>
											</li> -->
											{% if count == 1 %}
											<li class="nav-item">
												<a
													class="nav-link"
													data-toggle="tab"
													href="#edittab"
													role="tab"
													>Edit Details</a
												>
											</li>
											{% else %}
											<li class="nav-item">
												<a
													class="nav-link active"
													data-toggle="tab"
													href="#setting"
													role="tab"
													>Add Details</a
												>
											</li>
											{% endif %}
											<li class="nav-item">
												<a
													id="c_pass"
													class="nav-link "
													data-toggle="tab"
													href="#tasks"
													role="tab"
													>Change Password</a
												>
											</li>
										</ul>
										<div class="tab-content">
											<!-- Timeline Tab start -->
											<!-- <div
												class="tab-pane fade show active"
												id="timeline"
												role="tabpanel"
											> -->
												<!-- <div class="pd-20">
													<div class="profile-timeline">
														<div class="timeline-month">
															<h5>August, 2020</h5>
														</div>
														<div class="profile-timeline-list">
															<ul>
																<li>
																	<div class="date">12 Aug</div>
																	<div class="task-name">
																		<i class="ion-android-alarm-clock"></i> Task
																		Added
																	</div>
																	<p>
																		Lorem ipsum dolor sit amet, consectetur
																		adipisicing elit.
																	</p>
																	<div class="task-time">09:30 am</div>
																</li>
																<li>
																	<div class="date">10 Aug</div>
																	<div class="task-name">
																		<i class="ion-ios-chatboxes"></i> Task Added
																	</div>
																	<p>
																		Lorem ipsum dolor sit amet, consectetur
																		adipisicing elit.
																	</p>
																	<div class="task-time">09:30 am</div>
																</li>
																<li>
																	<div class="date">10 Aug</div>
																	<div class="task-name">
																		<i class="ion-ios-clock"></i> Event Added
																	</div>
																	<p>
																		Lorem ipsum dolor sit amet, consectetur
																		adipisicing elit.
																	</p>
																	<div class="task-time">09:30 am</div>
																</li>
																<li>
																	<div class="date">10 Aug</div>
																	<div class="task-name">
																		<i class="ion-ios-clock"></i> Event Added
																	</div>
																	<p>
																		Lorem ipsum dolor sit amet, consectetur
																		adipisicing elit.
																	</p>
																	<div class="task-time">09:30 am</div>
																</li>
															</ul>
														</div>
														<div class="timeline-month">
															<h5>July, 2020</h5>
														</div>
														<div class="profile-timeline-list">
															<ul>
																<li>
																	<div class="date">12 July</div>
																	<div class="task-name">
																		<i class="ion-android-alarm-clock"></i> Task
																		Added
																	</div>
																	<p>
																		Lorem ipsum dolor sit amet, consectetur
																		adipisicing elit.
																	</p>
																	<div class="task-time">09:30 am</div>
																</li>
																<li>
																	<div class="date">10 July</div>
																	<div class="task-name">
																		<i class="ion-ios-chatboxes"></i> Task Added
																	</div>
																	<p>
																		Lorem ipsum dolor sit amet, consectetur
																		adipisicing elit.
																	</p>
																	<div class="task-time">09:30 am</div>
																</li>
															</ul>
														</div>
														<div class="timeline-month">
															<h5>June, 2020</h5>
														</div>
														<div class="profile-timeline-list">
															<ul>
																<li>
																	<div class="date">12 June</div>
																	<div class="task-name">
																		<i class="ion-android-alarm-clock"></i> Task
																		Added
																	</div>
																	<p>
																		Lorem ipsum dolor sit amet, consectetur
																		adipisicing elit.
																	</p>
																	<div class="task-time">09:30 am</div>
																</li>
																<li>
																	<div class="date">10 June</div>
																	<div class="task-name">
																		<i class="ion-ios-chatboxes"></i> Task Added
																	</div>
																	<p>
																		Lorem ipsum dolor sit amet, consectetur
																		adipisicing elit.
																	</p>
																	<div class="task-time">09:30 am</div>
																</li>
																<li>
																	<div class="date">10 June</div>
																	<div class="task-name">
																		<i class="ion-ios-clock"></i> Event Added
																	</div>
																	<p>
																		Lorem ipsum dolor sit amet, consectetur
																		adipisicing elit.
																	</p>
																	<div class="task-time">09:30 am</div>
																</li>
															</ul>
														</div>
													</div>
												</div> -->
											<!-- </div> -->
											<!-- Timeline Tab End -->
											<!-- Password Tab start -->
											<div class="tab-pane fade" id="tasks" role="tabpanel">
												<div class="pd-20 profile-task-wrap">
													<div class="container pd-0">
														<form method="post" action="{% url 'servicer_change_password' %}">														<!-- Change Password start -->
														{% csrf_token %}
															<div class="form-group">
																<label>Old Password</label>
																<input
																	class="form-control form-control-lg"
																	type="password"
																	name="oldpass"
																	id="oldpasss"
																/>
															</div>
															<div class="form-group">
																<label>New Password</label>
																<input
																	class="form-control form-control-lg"
																	type="password"
																	name="newpass"
																	id="newpasss"
																/>
															</div>
															<div class="form-group">
																<label>Confirm Password</label>
																<input
																	class="form-control form-control-lg"
																	type="password"
																	id="cpasss"
																/>
															</div>
															<div class="form-group mb-0">
																<input
																	type="submit"
																	class="btn btn-primary"
																	value="Update"
																	id="passsubmitt"
																/>
															</div>
														</form>

														
														<!-- Change Password End -->
													</div>
												</div>
											</div>
											<!-- Tasks Tab End -->

											{% if not user %}
											<!-- Add Details Tab start -->
											<div
												class="tab-pane fade height-100-p show active"
												id="setting"
												role="tabpanel"
											>
												<div class="profile-setting">
													<form action="{% url 'Service_Details' %}" method="post" enctype="multipart/form-data">
													{% csrf_token %}
														<ul class="profile-edit-list row">
															<li class="weight-500 col-md-6">
																<h4 class="text-blue h5 mb-20">
																 Personal Details 
																</h4>
																<div class="form-group">
																	<label>First Name</label>
																	<input
																		class="form-control form-control-lg"
																		type="text"
																		name="fname"
																		id="first_name"
																	/>
																</div>
																<div class="form-group">
																	<label>Last name</label>
																	<input
																		class="form-control form-control-lg"
																		type="text"
																		name="lname"
																		id="last_name"
																		
																	/>
																</div>
																<div class="form-group">
																	<label>Email</label>
																	<input

																		class="form-control form-control-lg"
																		type="tel"
																		value="{{email}}"
																		readonly
																	/>
																</div>
																<div class="form-group">
																	<label>Phone</label>
																	<input
																		class="form-control form-control-lg"
																		type="tel"
																		name="phone"
																		id="phone_number"
																	/>
																</div>
																
														
																<div class="form-group">
																	<label>Image</label>
																	<input
																		class="form-control form-control-lg"
																		type="file"
																		name="img"
																	/>
																</div>
																<div class="form-group">
																	<label>Specialised Category</label>
																	<select
																		class="selectpicker form-control form-control-lg"
																		data-style="btn-outline-secondary btn-lg"
																		title="Not Chosen"
																		name="category"
																		id="select_category"
																	>
																	
																	{% for i in category %}
																		<option value="{{i.id}}">{{i.name}}</option>
																		{% endfor %}
																	</select>
																</div>
															
															
																<div class="form-group mb-0">
																	<input
																		type="submit"
																		class="btn btn-primary"
																		value="Save"
																		id="save_data"
																	/>
																</div>
															</li>
															<li class="weight-500 col-md-6">
																<h4 class="text-blue h5 mb-20">
																Address
																</h4>
																<div class="form-group">
																	<label>Hname</label>
																	<input
																		class="form-control form-control-lg"
																		type="text"
																		name="hname"
																		id="house_name"
																	/>
																</div>
																<div class="form-group">
																	<label>Street</label>
																	<input
																		class="form-control form-control-lg"
																		type="text"
																		name="street"
																		id="street_id"
																	/>
																</div>
																<div class="form-group">
																	<label>City</label>
																	<input
																		class="form-control form-control-lg"
																		type="text"
																		name="city"
																		id="city_id"
																	/>
																</div>
																<div class="form-group">
																	<label>Postal Code</label>
																	<input
																		class="form-control form-control-lg"
																		type="text"
																		name="pin"
																		id="pin_id"
																	/>
																</div>
																<div class="form-group">
																	<label>District</label>
																	<select
																		class="selectpicker form-control form-control-lg"
																		data-style="btn-outline-secondary btn-lg"
																		title="Not Chosen"
																		name="district"
																		id="district_id"
																	>
																		<option>Thrissur</option>
																		<option>Kozhikode</option>
																		<option>Ernakulam</option>
																	</select>
																</div>
															</li>
															
														</ul>
													</form>
												</div>
											</div>
											<!-- Setting Tab End -->
											{% else %}

											<!-- Edit Details Area -->
											<div
												class="tab-pane fade height-100-p show active"
												id="edittab"
												role="tabpanel"
											>
												<div class="profile-setting">
													<form action="{% url 'Service_Details_Update' %}" method="post" enctype="multipart/form-data">
													{% csrf_token %}
														<ul class="profile-edit-list row">
															<li class="weight-500 col-md-6">
																<h4 class="text-blue h5 mb-20">
																 Edit Details 
																</h4>
																{% for user in user %}
																<div class="form-group">
																	<label>First Name</label>
																	<input
																		class="form-control form-control-lg"
																		type="text"
																		name="fname"
																		value="{{user.fname}}"
																		id="first_name"
																	/>
																</div>
																<div class="form-group">
																	<label>Last name</label>
																	<input
																		class="form-control form-control-lg"
																		type="text"
																		name="lname"
																		id="last_name"
																		value="{{user.lname}}"

																		
																	/>
																</div>
																<div class="form-group">
																	<label>Email</label>
																	<input
																		class="form-control form-control-lg"
																		type="tel"
																		value="{{email}}"
																		readonly
																	/>
																</div>
																<div class="form-group">
																	<label>Phone</label>
																	<input
																		class="form-control form-control-lg"
																		type="tel"
																		name="phone"
																		value="{{user.phone_no}}"

																	/>
																</div>
																<div class="form-group">
																	<label>Specialised Category</label>
																	<select
																		class="selectpicker form-control form-control-lg"
																		data-style="btn-outline-secondary btn-lg"
																		name="category"
																	>
																	<option value="{{user.category_id}}">{{user.category.name}}</option>
															
																	{% for i in category %}
																		<option value="{{i.id}}">{{i.name}}</option>
																		{% endfor %}
																	</select>
																</div>
															
															
																<div class="form-group mb-0">
																	<input
																		type="submit"
																		class="btn btn-primary"
																		value="Update"
																		id="edit_submitt"
																	/>
																</div>
															</li>
															<li class="weight-500 col-md-6">
																<h4 class="text-blue h5 mb-20">
																Address
																</h4>
																<div class="form-group">
																	<label>House Name</label>
																	<input
																		class="form-control form-control-lg"
																		type="text"
																		name="hname"
																		value="{{user.hname}}"

																	/>
																</div>
																<div class="form-group">
																	<label>Street</label>
																	<input
																		class="form-control form-control-lg"
																		type="text"
																		name="street"
																		value="{{user.street}}"

																	/>
																</div>
																<div class="form-group">
																	<label>City</label>
																	<input
																		class="form-control form-control-lg"
																		type="text"
																		name="city"
																		value="{{user.city}}"

																	/>
																</div>
																<div class="form-group">
																	<label>Postal Code</label>
																	<input
																		class="form-control form-control-lg"
																		type="text"
																		name="pin"
																		value="{{user.pin}}"

																	/>
																</div>
																<div class="form-group">
																	<label>District</label>
																	<select
																		class="selectpicker form-control form-control-lg"
																		data-style="btn-outline-secondary btn-lg"
																		name="district"
																	>
																		<option>{{user.district}}</option>
																		<option>Thrissur</option>
																		<option>Kozhikode</option>
																		<option>Ernakulam</option>
																	</select>
																</div>
																{% endfor %}
																
															</li>
														</ul>
													</form>
												</div>
											</div>
					<!-- End of Edit Details  -->
											{% endif %}

										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="footer-wrap pd-20 mb-20 card-box" style="font-weight:bold;color:rgb(255, 106, 0);">
					Smart Store
				</div>
			</div>
		</div>
	
		<script>
			window.addEventListener("DOMContentLoaded", function () {
				var image = document.getElementById("image");
				var cropBoxData;
				var canvasData;
				var cropper;

				$("#modal")
					.on("shown.bs.modal", function () {
						cropper = new Cropper(image, {
							autoCropArea: 0.5,
							dragMode: "move",
							aspectRatio: 3 / 3,
							restore: false,
							guides: false,
							center: false,
							highlight: false,
							cropBoxMovable: false,
							cropBoxResizable: false,
							toggleDragModeOnDblclick: false,
							ready: function () {
								cropper.setCropBoxData(cropBoxData).setCanvasData(canvasData);
							},
						});
					})
					.on("hidden.bs.modal", function () {
						cropBoxData = cropper.getCropBoxData();
						canvasData = cropper.getCanvasData();
						cropper.destroy();
					});
			});
		</script>
		{% endblock %}