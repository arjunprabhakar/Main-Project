{% extends 'Customer/base.html' %}

{% load static %}
{% block content %}

            <!-- Page Title -->
            <div class="bg-light py-4 mb-4 mb-lg-10" style="text-align: center;">
                <h8 >Profile</h8>
            </div>
            <!-- Page Title -->


                <!-- For Alert Message -->
                {% include 'Customer/alert.html' %}

               




            <!-- Product Category -->
            <div class="container">
                <div class="row g-lg-4">
                    <!-- Sidebar -->
                    <section class="col-lg-4">
                        <div class="offcanvas offcanvas-collapse offcanvas-start rounded-3 shadow" id="category-sidebar" style="max-width: 23rem;">
                            <div class="offcanvas-header align-items-center shadow-sm">
                                <h2 class="h5 mb-0">Filters</h2>
                                <button class="btn-close ms-auto" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                            </div>
                            <div class="offcanvas-body p-lg-8">
                                <div class="widget widget-categories pb-5 mb-5 border-bottom">
                                    <div class="d-flex align-items-center fs-sm mb-3">
                                        <a class="blog-article-meta-link" href="#">
                                            <div class="avatar">
                                                <img src="{% static 'smart/assets/img/blog/avatar/logo.jpg' %}" alt="Selinda Romer">
                                            </div>
                                        </a>
                                        <div class="d-flex flex-column flex-grow-1">
                                            <a style="color:#000;font-weight:bold;" class="blog-article-meta-link">
                                                {{user.name}} {{user.lname}}
                                            </a>
                                            <a  class="blog-article-meta-link">
                                                {{user.phone_no}}
                                            </a>
                                            <a  class="blog-article-meta-link">
                                                {{user.email_id}}
                                            </a>
                                        </div>
                                    </div>
                                </div>


                                <!-- Categories -->
                                <div class="widget widget-categories pb-5 mb-5 border-bottom">
                                    <h3 class="widget-title">Shipping Address</h3>
                                    <div class="accordion mt-n2" id="shop-categories">
                
                                        <!-- Address -->
                                        
                                        {% for i in address %}
                                            <div class="accordion-item">
                                                <h3 style="display: inline-block;" class="accordion-header">
                                                    <a class="accordion-button collapsed" href="#category-cameras" role="button" data-bs-toggle="collapse" aria-expanded="false" aria-controls="category-cameras">Address-{{forloop.counter}}</a>
                                                </h3>
                                                <a href="{% url 'de_address' i.id %}" style="display: inline-block;" class="btn btn-link text-danger " title="Remove">
                                                    <i class="ri-close-circle-line fs-5 me-2"></i>
                                                </a>
                                                <div class="accordion-collapse collapse" id="category-cameras" data-bs-parent="#shop-categories">
                                                    <div class="accordion-body">
                                                        <div class="widget widget-links border-start">
                                                            <ul class="widget-list">
                                                                <li class="widget-list-item border-bottom pb-2">
                                                                    <a class="widget-list-link d-flex justify-content-between align-items-center" >
                                                                        {{i.fname}} {{i.lname}}<br>
                                                                        {{i.phone_no}} <br>
                                                                        {{i.email}} <br>
                                                                        {{i.hname}} (H), {{i.street}}<br>
                                                                        {{i.city}} (H), {{i.district}}<br>
                                                                        {{i.state}} (H),pin-{{i.pin}}<br>
                                                                        
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                        
                                  
                                        

                                    </div>
                                </div>
                       
                                
                            </div>
                        </div>
                    </section>
                    <!-- Sidebar -->

                    <!-- Content -->
                    <aside class="col-lg-8">
                     
                        <div class="card bg-light border-gray-200 mt-5 mb-10">
                            <div class="card-body">
                                <div class="d-flex align-items-center justify-content-between">
                                   

                                    <ul class="nav nav-pills flex-nowrap" id="pills-tab" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active py-2 px-3" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">
                                                My Orders
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link py-2 px-3" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">
                                            Shipping Address
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link py-2 px-3" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-service" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">
                                            Product Service
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link py-2 px-3" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-password" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">
                                            Change Password
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
            

                        <div class="tab-content" id="pills-tabContent">
    
                           

<!-- ###################################################### -->
                            <!-- My Order Div -->
                            <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                                    
                                    <div class="table-responsive">
                                        <table class="table table-striped table-hover table-borderless fs-sm mb-0">
                                            <thead>
                                                <tr>
                                                    <th class="align-middle">Sl No</th>
                                                    <th class="align-middle">Product</th>
                                                    <th class="align-middle">Rate</th>
                                                    <th class="align-middle">Qty</th>
                                                    <th class="align-middle">Date</th>
                                                    <th class="align-middle">Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                                {% for i in order %}
                                                <tr>
                                                    <td class="align-middle">
                                                     {{forloop.counter}}
                                                    </td>
                                                    <td class="align-middle">
                                                        <div class="avatar" style="border: none;">
                                                            <img src="{{i.product.image.url}}" alt="Selinda Romer">
                                                        </div>
                                                        <span class="text-dark fw-medium">{{ i.product.name }}</span>
                                                    </td>
                                                    <td class="align-middle">
                                                        <span class="text-dark fw-medium">{{i.product.selling_price}}</span>
                                                    </td>
                                                    <td class="align-middle">
                                                        <span class="text-dark fw-medium">{{i.quantity}}</span>
                                                    </td>
                                                    <td class="align-middle">
                                                        <span class="text-dark fw-medium">{{i.ordered_date|date:"j M, Y"}}</span>
                                                    </td>
                                                    <td class="align-middle">
                                                        <span class="text-dark fw-medium"><a class="btn btn-sm btn-primary" href="{% url 'pdf' i.id %}">Download Bill</a></span>
                                                    </td>
                                                </tr>
                                                {% endfor %}
                                                
                                            </tbody>
                                        </table>
                                    </div>
                            </div>


            <!--##############################  -->
                            <!-- Shipping address -->
                            <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                                <div class="border border-gray-200 rounded-3 p-4">
                                <form method="post" action="{% url 'useraddress' %}">
						        {% csrf_token %}
                                    
                                    <h6 class="pb-4 mb-4 border-bottom">Shipping address</h6>
                                    <!-- Title -->
        
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="mb-4">
                                                <label class="form-label" for="billing-fn">First Name</label>
                                                <input class="form-control" type="text" name="fname" id="billing-fn">
                                            </div>
                                        </div>
        
                                        <div class="col-sm-6">
                                            <div class="mb-4">
                                                <label class="form-label" for="billing-ln">Last Name</label>
                                                <input class="form-control" type="text" name="lname" id="billing-ln">
                                            </div>
                                        </div>
                                    </div>
        
                                   
        
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="mb-4">
                                                <label class="form-label" for="billing-email">Email</label>
                                                <input class="form-control" name="email" type="email" id="billing-email">
                                            </div>
                                        </div>
        
                                        <div class="col-sm-6">
                                            <div class="mb-4">
                                                <label class="form-label" for="billing-phone">Phone Number</label>
                                                <input class="form-control" name="phn" type="text" id="billing-phone">
                                            </div>
                                        </div>
                                    </div>
        
                                   
        
                                    <div class="row">
                                        
                                        <div class="col-sm-6">
                                            <div class="mb-4">
                                                <label class="form-label"  for="billing-state">State</label>
                                                <select class="form-select" name="state" id="billing-state">
                                                    <option value="">Choose state</option>
                                                    <option value="Kerala">Kerala</option>
                                                    <option value="Thamilnadu">Thamilnadu</option>
                                                    <option value="Karnadaka">Karnadaka</option>
                                                  
                                                </select>
                                            </div>
                                        </div>
        
                                        <div class="col-sm-6">
                                            <div class="mb-4">
                                                <label class="form-label" for="billing-state">District</label>
                                                <select class="form-select" name="district" id="billing-state">
                                                    <option value="">Choose District</option>
                                                    <option value="Ernakulam">Ernakulam</option>
                                                    <option value="Wayanad">Wayanad</option>
                                                    <option value="Nilgiri">Nilgiri</option>
                                                    <option value="Kollam">Kollam</option>
                                                    <option value="Kozhikode">Kozhikode</option>
                                                </select>
                                            </div>
                                        </div>
        
                                        
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="mb-4">
                                                <label class="form-label" for="billing-email">House name/No</label>
                                                <input class="form-control" name="hname" type="text" id="billing-email">
                                            </div>
                                        </div>
        
                                        <div class="col-sm-6">
                                            <div class="mb-4">
                                                <label class="form-label" for="billing-phone">Street</label>
                                                <input class="form-control" name="street" type="text" id="billing-phone">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="mb-4">
                                                <label class="form-label" for="billing-email">City</label>
                                                <input class="form-control" name="city" type="text" id="billing-email">
                                            </div>
                                        </div>
        
                                        <div class="col-sm-6">
                                            <div class="mb-4">
                                                <label class="form-label" for="billing-phone">Postal code</label>
                                                <input class="form-control" name="pin" type="text" id="billing-phone">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-none d-lg-flex align-items-center justify-content-between mt-8">
                                        <button class="btn btn-primary">
                                            <span class="d-none d-sm-inline">Submit</span>
                                        </button>
                                    </div>
                            </form>
                                </div>
                            </div>

            <!--##############################  -->

                        <!-- Change Password -->
                        <div class="tab-pane fade" id="pills-service" role="tabpanel" aria-labelledby="pills-profile-tab">
                            <!-- Title -->
    
                            <!-- Accordion-->
                            <div class="accordion mb-4" id="payment-method">
                                <div class="accordion-item">
                                    <h3 class="accordion-header">
                                        <a class="accordion-button" href="#card" data-bs-toggle="collapse">
                                            <i class="ri-bank-card-line fs-lg me-2 align-middle"></i>
                                            Request for service
                                        </a>
                                    </h3>
                                    
                                    <div class="accordion-collapse collapse show" id="card" data-bs-parent="#payment-method">
                                        <div class="accordion-body">
                                           
                                            <div class="credit-card-wrapper"></div>
                                            
                                            <form method="post" action="{% url 'View_Service' %}" enctype="multipart/form-data">
                                                {% csrf_token %}
                                                    


                                                <div class="row">
                                                        
                                                    <div class="col-sm-6">
                                                        <div class="mb-4">
                                                            <label class="form-label"  for="billing-state">Category</label>
                                                            <select class="form-select" name="category" id="billing-state">
                                                                <option value="">Choose state</option>
                                                                {% for i in category %}
                                                                <option >{{i.name}}</option>
                                                                {% endfor %}
                                                              
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="mb-4">
                                                            <label class="form-label" for="billing-fn">Brand Name :</label>
                                                            <input class="form-control" type="text" name="brand" id="billing-fn">
                                                        </div>
                                                    </div>
                                                 
                    
                                                    
                                                </div>
                                                    <div class="row">
                                                        <div class="col-sm-6">
                                                            <div class="mb-4">
                                                                <label class="form-label" for="billing-fn">Model:</label>
                                                                <input class="form-control" type="text" name="model" id="billing-fn">
                                                            </div>
                                                        </div>
                        
                                                        <div class="col-sm-6">
                                                            <div class="mb-4">
                                                                <label class="form-label" for="billing-ln">Model Number :</label>
                                                                <input class="form-control" type="text" name="model_no" id="billing-ln">
                                                            </div>
                                                        </div>
                                                    </div>
                        
                                                   
                        
                                                    <div class="row">
                                                        <div class="col-sm-6">
                                                            <div class="mb-4">
                                                                <label class="form-label" for="billing-email">Smart Store Purchase Bill</label>
                                                                <input class="form-control" name="bill" type="file" id="billing-email">
                                                            </div>
                                                        </div>
                        
                                                        <div class="col-sm-6">
                                                            <div class="mb-4">
                                                                <label class="form-label" for="billing-phone">Issues</label>
                                                                <input class="form-control" name="issue" type="text" id="billing-phone">
                                                            </div>
                                                        </div>
                                                    </div>
                        
                                                  
                                                    <div class="d-none d-lg-flex align-items-center justify-content-between mt-8">
                                                        <button class="btn btn-primary">
                                                            <span class="d-none d-sm-inline">Submit</span>
                                                        </button>
                                                    </div>
                                            </form>

                                        </div>
                                    </div>
                                </div>
    
                                <div class="accordion-item">
                                    <h3 class="accordion-header">
                                        <a class="accordion-button collapsed" href="#paypal" data-bs-toggle="collapse">
                                            <i class="ri-paypal-line fs-lg me-2 align-middle"></i>
                                            Service History
                                        </a>
                                    </h3>
                                    <div class="accordion-collapse collapse" id="paypal" data-bs-parent="#payment-method">
                                        

                                        <div class="table-responsive">
                                            <table class="table table-striped table-hover table-borderless fs-sm mb-0">
                                                <thead>
                                                    <tr>
                                                        <th class="align-middle">Sl No</th>
                                                        <th class="align-middle">Category</th>
                                                        <th class="align-middle">Brand</th>
                                                        <th class="align-middle">Model</th>
                                                        <th class="align-middle">Requested Date</th>
                                                        <th class="align-middle">Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
    
                                                    {% for i in service_product %}
                                                    <tr>
                                                        <td class="align-middle">
                                                         {{forloop.counter}}
                                                        </td>
                                                        <td class="align-middle">
                                                            <span class="text-dark fw-medium">{{ i.category }}</span>
                                                        </td>
                                                        <td class="align-middle">
                                                            <span class="text-dark fw-medium">{{i.brand}}</span>
                                                        </td>
                                                        <td class="align-middle">
                                                            <span class="text-dark fw-medium">{{i.model}}</span>
                                                        </td>
                                                        <td class="align-middle">
                                                            <span class="text-dark fw-medium">{{i.date|date:"j M, Y"}}</span>
                                                        </td>
                                                        <td class="align-middle">
                                                            {% if i.status == 0 %}
                                                            <span class="text-dark fw-medium"><a class="btn btn-sm btn-danger" >Requested</a></span>
                                                            {% else %}
                                                            <span class="text-dark fw-medium"><a class="btn btn-sm btn-success" >Accepted</a></span>
                                                            {% endif %}
                                                        </td>
                                                    </tr>
                                                    {% endfor %}
                                                    
                                                </tbody>
                                            </table>
                                        </div>


                                    </div>
                                </div>                            
                            </div>
                            <!-- Accordion-->
                        </div>


<!-- ############################## -->
                             <!-- Change Password -->
                             <div class="tab-pane fade" id="pills-password" role="tabpanel" aria-labelledby="pills-profile-tab">
                                <div class="border border-gray-200 rounded-3 p-4">
                                    <form method="post" action="{% url 'change_password' %}">
                                    {% csrf_token %}
                                        
                                        <h6 class="pb-4 mb-4 border-bottom">Change Password</h6>
                                        <!-- Title -->
            
                                            <div class="col-sm-6">
                                                <div class="mb-4">
                                                    <label class="form-label" for="billing-fn">Old Password</label>
                                                    <input class="form-control" type="password" name="oldpass" id="billing-fn">
                                                </div>
                                            </div>
                                            
                                            <div class="col-sm-6">
                                                <div class="mb-4">
                                                    <label class="form-label" for="billing-fn">New Password</label>
                                                    <input class="form-control" type="password" name="pass" id="billing-fn">
                                                </div>
                                            </div>
            
                                            <div class="col-sm-6">
                                                <div class="mb-4">
                                                    <label class="form-label" for="billing-ln">Confirm Password</label>
                                                    <input class="form-control" type="password" id="billing-ln">
                                                </div>
                                            </div>
            
                                     
                                        <div class="d-none d-lg-flex align-items-center justify-content-between mt-8">
                                            <button class="btn btn-primary">
                                                <span class="d-none d-sm-inline">Submit</span>
                                            </button>
                                        </div>
                                </form>
                            </div>
                         </div>
                        </div>
                    </aside>
                    <!-- Content -->
                </div>
            </div>
            <!-- Product Category -->
        </main>
        <!-- Page -->

{% endblock %}
